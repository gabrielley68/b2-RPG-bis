<?php
    $games = [
        [
            "name" => "Legends of Runeterra",
            "developers" => "Riot Games",
            "releaseDate" => 2020,
            "image" => "/public/images/LOR.png",
            "description" => "Legends of Runeterra (abrégé LoR) est un jeu de cartes à collectionner numérique, développé et édité par Riot Games. Il est sorti en version bêta ouverte pour Microsoft Windows le 24 janvier 2020, puis en version finale sur Windows, iOS et Android le 30 avril 2020.",
            "link" => "https://playruneterra.com/fr-fr/",
        ],
        [
            "name" => "Hearthstone",
            "developers" => "Blizzard",
            "releaseDate" => 2014,
            "image" => "/public/images/hearthstone.jpg",
            "description" => "Hearthstone (anciennement Hearthstone: Heroes of Warcraft) est un jeu de cartes à collectionner en ligne, développé et édité par la société Blizzard Entertainment. C'est un jeu gratuit (free to play) s'inspirant de l'univers de fiction médiéval-fantastique du jeu vidéo Warcraft développé par Blizzard.",
            "link" => "https://playhearthstone.com/fr-fr/",
        ],
        [
            "name" => "Magic Arena",
            "developers" => "WotC",
            "releaseDate" => 2019,
            "image" => "/public/images/magic.jpg",
            "description" => "Magic: The Gathering Arena or MTG Arena is a free-to-play digital collectible card game developed and published by Wizards of the Coast (WotC). The game is a digital adaption based on the Magic: The Gathering (MTG) card game, allowing players to gain cards through booster packs, in-game achievements or microtransaction purchases, and build their own decks to challenge other players",
            "link" => "https://magic.wizards.com/fr/mtgarena"
        ],
        [
            "name" => "League of Legends",
            "developers" => "Riot Games",
            "releaseDate" => 2009,
            "image" => "/public/images/lol.jpg",
            "description" => "League of Legends (abrégé LoL) est un jeu vidéo sorti en 2009 de type arène de bataille en ligne, free-to-play, développé et édité par Riot Games sur Windows et Mac OS. ",
            "link" => "https://www.leagueoflegends.com/fr-fr/"
        ],
        [
            "name" => "Legends of Runeterra",
            "developers" => "Riot Games",
            "releaseDate" => 2020,
            "image" => "/public/images/LOR.png",
            "description" => "Legends of Runeterra (abrégé LoR) est un jeu de cartes à collectionner numérique, développé et édité par Riot Games. Il est sorti en version bêta ouverte pour Microsoft Windows le 24 janvier 2020, puis en version finale sur Windows, iOS et Android le 30 avril 2020.",
            "link" => "https://playruneterra.com/fr-fr/",
        ],
        [
            "name" => "Hearthstone",
            "developers" => "Blizzard",
            "releaseDate" => 2014,
            "image" => "/public/images/hearthstone.jpg",
            "description" => "Hearthstone (anciennement Hearthstone: Heroes of Warcraft) est un jeu de cartes à collectionner en ligne, développé et édité par la société Blizzard Entertainment. C'est un jeu gratuit (free to play) s'inspirant de l'univers de fiction médiéval-fantastique du jeu vidéo Warcraft développé par Blizzard.",
            "link" => "https://playhearthstone.com/fr-fr/",
        ],
        [
            "name" => "Magic Arena",
            "developers" => "WotC",
            "releaseDate" => 2019,
            "image" => "/public/images/magic.jpg",
            "description" => "Magic: The Gathering Arena or MTG Arena is a free-to-play digital collectible card game developed and published by Wizards of the Coast (WotC). The game is a digital adaption based on the Magic: The Gathering (MTG) card game, allowing players to gain cards through booster packs, in-game achievements or microtransaction purchases, and build their own decks to challenge other players",
            "link" => "https://magic.wizards.com/fr/mtgarena"
        ],
        [
            "name" => "League of Legends",
            "developers" => "Riot Games",
            "releaseDate" => 2009,
            "image" => "/public/images/lol.jpg",
            "description" => "League of Legends (abrégé LoL) est un jeu vidéo sorti en 2009 de type arène de bataille en ligne, free-to-play, développé et édité par Riot Games sur Windows et Mac OS. ",
            "link" => "https://www.leagueoflegends.com/fr-fr/"
        ],
        [
            "name" => "Legends of Runeterra",
            "developers" => "Riot Games",
            "releaseDate" => 2020,
            "image" => "/public/images/LOR.png",
            "description" => "Legends of Runeterra (abrégé LoR) est un jeu de cartes à collectionner numérique, développé et édité par Riot Games. Il est sorti en version bêta ouverte pour Microsoft Windows le 24 janvier 2020, puis en version finale sur Windows, iOS et Android le 30 avril 2020.",
            "link" => "https://playruneterra.com/fr-fr/",
        ],
        [
            "name" => "Hearthstone",
            "developers" => "Blizzard",
            "releaseDate" => 2014,
            "image" => "/public/images/hearthstone.jpg",
            "description" => "Hearthstone (anciennement Hearthstone: Heroes of Warcraft) est un jeu de cartes à collectionner en ligne, développé et édité par la société Blizzard Entertainment. C'est un jeu gratuit (free to play) s'inspirant de l'univers de fiction médiéval-fantastique du jeu vidéo Warcraft développé par Blizzard.",
            "link" => "https://playhearthstone.com/fr-fr/",
        ],
        [
            "name" => "Magic Arena",
            "developers" => "WotC",
            "releaseDate" => 2019,
            "image" => "/public/images/magic.jpg",
            "description" => "Magic: The Gathering Arena or MTG Arena is a free-to-play digital collectible card game developed and published by Wizards of the Coast (WotC). The game is a digital adaption based on the Magic: The Gathering (MTG) card game, allowing players to gain cards through booster packs, in-game achievements or microtransaction purchases, and build their own decks to challenge other players",
            "link" => "https://magic.wizards.com/fr/mtgarena"
        ],
        [
            "name" => "League of Legends",
            "developers" => "Riot Games",
            "releaseDate" => 2009,
            "image" => "/public/images/lol.jpg",
            "description" => "League of Legends (abrégé LoL) est un jeu vidéo sorti en 2009 de type arène de bataille en ligne, free-to-play, développé et édité par Riot Games sur Windows et Mac OS. ",
            "link" => "https://www.leagueoflegends.com/fr-fr/"
        ],
    ];

    $database = new PDO(
        'mysql:host=localhost;dbname=gameLibrary',
        'gab',
        'motdepasse'
    );

    // Préparation de la requête
    $query = $database->prepare("SELECT * FROM Game;");
    // Lancement de la requête
    $query->execute();
    // Récupération des data
    $games = $query->fetchAll();

    $filteredGames = $games;
    if(array_key_exists('searchName', $_GET)){
        $filteredGames = filterArray(
            $filteredGames,
            'name',
            $_GET['searchName']
        );
    }
    if(array_key_exists('searchDev', $_GET)){
        $filteredGames = filterArray(
            $filteredGames,
            'developers',
            $_GET['searchDev']
        );
    }

    $currentTab = 'games';

    require ROOT . '/views/games.view.php';
?>
